<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Games 2D Overview</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="shortcut icon" href="/images/logo64.png">
  <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-storage.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-firestore.js"></script>
  <script src="/__/firebase/init.js"></script>

  <link rel="stylesheet" href="/css/base.css" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

  <script>
    window.addEventListener('load', async (event) => {
      let module = await import('/models/baseapp.js');

      window.BaseApp = new module.BaseApp();
    });
  </script>
  <style>
    h1 {
      color: rgb(0, 0, 255);
    }

    h2 {
      color: rgb(255, 0, 0);
    }

    .app_panel h2 i {
      line-height: 20px;
      font-size: 30px;
      position: relative;
      top: 5px;
      left: -6px;
      color: rgb(100, 100, 100);
      transform: rotateX(180deg);
      transition: transform 600ms;
    }

    .app_panel .collapsed h2 i {
      transform: rotateX(0deg);
    }

    .app_panel {
      background: rgb(250, 250, 250);
    }

    html,
    body {
      min-height: 100vh;
    }

    .app_panel>div {
      max-width: 1000px;
    }
  </style>
</head>

<body style="background:rgb(250,250,250);">
  <div style="display:flex;flex-direction:column;min-height:100vh" class="app_panel">
    <div class='collapsed' style="padding:10px;">
      <h1 class="collapse_header right_arrow">Games Lobby <span class="header_down_arrow">&#9660;</span></h1>
      <div class="collapse_panel">
        <div style="font-size:1.25em;padding:10px;">
          <table>
            <tr>
              <td><b>Goal</b></td>
              <td>Make a game similar to a table in Yahoo Games of the past - where the
                sit button is in view so you can try to sit at the best tables (not just join).
                <br>
                <b>Contested sitting</b> at tables managed with a transaction so you don't leave the lobby if you don't
                get the seat
                <br>
                Use a document database - in this case Firestore (Google Cloudstore) as the realtime datastore
              </td>
            </tr>
            <tr>
              <td><b>Data</b></td>
              <td>List of games, past for user, current ones for user and public games with open seats.</td>
            </tr>
            <tr>
              <td><b style="white-space:nowrap">Compute &nbsp;</b></td>
              <td>Filter games and provide UI options to create and/or join and sit at game table.</td>
            </tr>
            <tr>
              <td><b>Note</b></td>
              <td>RTDB is used for the green persistance dot (refer to chat details for more on this)
              </td>
            </tr>
          </table>
        </div>
        <video src="https://hcwebflow.s3.us-west-2.amazonaws.com/locatebeer/ratings.mp4" controls
          preload="auto"></video>
      </div>
    </div>
    <div class='collapsed' style="padding:10px;">
      <h1 class="collapse_header right_arrow">Open Source <span class="header_down_arrow">&#9660;</span></h1>
      <div class="collapse_panel">
        <br>
        <a href="https://github.com/HuskerSam/simplegame" target="_blank">github.com/HuskerSam/simplegame</a>
        <br>
      </div>
    </div>
    <div style="flex:1"></div>
    <div class="copyright_panel">
      <a href="mailto:website@husker.beer" target="_blank">website@husker.beer</a>
      <br>Â© 2022 Locate.Beer. All Rights Reserved.
    </div>
  </div>
  <script>
    let basePath = '';
    let resultarea = document.getElementById('resultarea');

    window.admin_write_doc = document.getElementById('admin_write_doc');

    if (window.admin_write_doc)
      window.admin_write_doc.addEventListener('click', async e => {

        resultarea.innerHTML = 'pending';


        let path = document.getElementById('admin_doc_path').value;
        let jsontext = window.editor.getValue();
        let admin_token = document.getElementById('admin_token').value;
        let details = {
          jsontext,
          path
        };
        let formBody = [];
        for (let property in details) {
          let encodedKey = encodeURIComponent(property);
          let encodedValue = encodeURIComponent(details[property]);
          formBody.push(encodedKey + "=" + encodedValue);
        }
        let body = formBody.join("&");

        let f_result = await fetch(basePath + 'webPage/adminwrite', {
          method: 'POST',
          mode: 'cors',
          cache: 'no-cache',
          headers: {
            'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8',
            'token': admin_token
          },
          body
        });
        let json = await f_result.json();

        if (json.success)
          resultarea.innerHTML = JSON.stringify(json, null, '\t');
        else
          resultarea.innerHTML = JSON.stringify(json, null, '\t');
      });
  </script>

</body>

</html>